(this["webpackJsonpinterview-manager-system"]=this["webpackJsonpinterview-manager-system"]||[]).push([[20],{315:function(e,t,n){"use strict";var a=n(14),i=n(0),r=n.n(i),c=n(334),o=n(289),s=n(1),l=r.a.forwardRef((function(e,t){var n,i,r,l,d=e.children,u=e.type,p=e.direction,b=e.offset,j=e.scale;switch(p){case"up":case"left":r=b,l=0;break;default:r=0,l=b}var h=Object(c.a)(r,l),f=Object(a.a)(h,2),g=f[0],O=f[1],m=Object(c.a)(r,l),x=Object(a.a)(m,2),v=x[0],y=x[1];switch(u){case"rotate":return Object(s.jsx)(o.a.div,{ref:t,animate:{rotate:360},transition:{repeat:1/0,repeatType:"loop",duration:2,repeatDelay:0},children:d});case"slide":return"up"===p||"down"===p?Object(s.jsx)(o.a.div,{ref:t,animate:{y:void 0!==v?v:""},onHoverEnd:function(){return y()},onHoverStart:function(){return y()},children:d}):Object(s.jsx)(o.a.div,{ref:t,animate:{x:void 0!==g?g:""},onHoverEnd:function(){return O()},onHoverStart:function(){return O()},children:d});default:return"number"===typeof j&&(j={hover:j,tap:j}),Object(s.jsx)(o.a.div,{ref:t,whileHover:{scale:null===(n=j)||void 0===n?void 0:n.hover},whileTap:{scale:null===(i=j)||void 0===i?void 0:i.tap},children:d})}}));l.defaultProps={type:"scale",offset:10,direction:"right",scale:{hover:1,tap:.9}},t.a=l},590:function(e,t,n){"use strict";n.r(t);var a=n(6),i=n(18),r=n(8),c=n.n(r),o=n(272),s=n(282),l=n(300),d=n(74),u=n(0),p=n.n(u),b=n(170),j=n(20),h=n(316),f=n(317),g=n(125),O=n(14),m=n(30),x=n(112),v=n.n(x),y=n(277),w=n(609),k=n(598),q=n(607),P=n(610),_=n(26),C=n(600),I=n(315),S=n(17),R=n(81),T=n(588),A=n(1),B=Object(T.a)({root:{position:"relative",width:"100%",margin:"2em 0",padding:"1em",border:"solid 1px",borderColor:"#bdbdbd",borderRadius:"4px"},legend:{zIndex:1,position:"absolute",width:"fit-content",height:"24px",background:"white",padding:"0.25em 0.5em",left:"10px",transform:"translate(0, -125%)"}}),E=function(e){var t=e.children,n=e.legend,a=B();return Object(A.jsxs)(o.a,{className:a.root,children:[n&&Object(A.jsx)(R.a,{variant:"h4",component:"h4",className:a.legend,children:n}),t]})},F=n(9),Q=n(128),N=n(131),G=n(23),H=n(135),W=Object(G.b)("applicantReferences/getQuestionsThunk",function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.b.getQuestionsThunk(t.language_id,t.rank_id);case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),L=Object(G.b)("applicant/getInterviewQuestionThunk",function(){var e=Object(i.a)(c.a.mark((function e(t,n){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.b.getInterviewQuestionThunk({data:t.applyPosition});case 2:return a=e.sent,console.log(t.applyPosition),console.log("data",a.success),e.abrupt("return",a&&Object(F.a)(Object(H.g)({applicant:t,questions:a.success})));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),z=Object(G.b)("applicant/getInterviewDataThunk",function(){var e=Object(i.a)(c.a.mark((function e(t){var n,i,r,o,s,l,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={name:"",age:"",email:"",phone:"",address:"",time:"",applyPosition:[],questions:[],status:1,note:""},e.next=3,H.b.getInterviewDataThunk(t);case 3:return i=e.sent,r=Object(a.a)({},i.success),o=r.candidate_question,s=o.map((function(e){return Object(a.a)(Object(a.a)({},e.question),{},{status:e.status,candidate_id:e.id})}))||[],console.log(o),l={language:"",questions:{base:s,focus:[],advanced:[]}},Object.keys(n).forEach((function(e){r&&r[e]&&(n[e]=r[e])})),d=o.map((function(e){return{question_id:e.id,status:e.status}})),n.time=n.time.split(".")[0],e.abrupt("return",i&&Object(F.a)(Object(H.h)({applicant:Object(a.a)({},n),interviewQuestions:[Object(a.a)({},l)],questions:d})));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),D=[{label:"Information",render:[{key:"name",label:"Full Name",type:"text",required:!0},{key:"age",label:"Age",type:"number",required:!0},{key:"phone",label:"Phone Number",type:"tel",required:!0}]},{label:"Contact",render:[{key:"email",label:"Email",type:"email",required:!0}]},{label:"Address",render:[{key:"address",label:"Address",type:"text",required:!0}]},{label:"Interview Time",render:[{key:"time",label:"Interview Time",type:"datetime-local",required:!0}]},{label:"Note",render:[{key:"note",label:"Note",type:"text"}]}],M=n(601),V=n(608),J=function(e){var t=e.errors,n=(e.handleBlur,e.handleChange),a=e.touched,i=e.values,r=e.label,c=e.required,o=e.type,s=e.name,l=e.readOnly;return Object(A.jsxs)(w.a,{fullWidth:!0,error:Boolean(a&&t&&!l),children:[Object(A.jsx)(M.a,{htmlFor:"outlined-adornment-".concat(r.split(" ").join("-")),required:c,children:r}),Object(A.jsx)(V.a,{id:"outlined-adornment-".concat(r.split(" ").join("-")),type:o,value:i,name:s,onChange:n,label:r,readOnly:l}),a&&t&&!l&&Object(A.jsx)(P.a,{error:!0,id:"standard-weight-helper-text-last-name",children:t})]})},K=p.a.memo(J),U=n(61),X=function(e){var t=e.interviewing,n=e.errors,r=e.handleBlur,d=e.handleChange,p=(e.handleSubmit,e.setFieldValue),j=e.touched,h=e.values,f=Object(b.a)(),g=Object(m.a)(),x=Object(F.d)(),R=Object(y.a)(g.breakpoints.down("md")),T=Object(F.e)((function(e){return e.language})).language,B=Object(F.e)((function(e){return e.rank})).ranks,G=u.useState(!1),H=Object(O.a)(G,2),W=H[0],z=H[1];u.useEffect((function(){v.a.all([S.a.get("/v1/languages/all"),S.a.get("/v1/ranks/all")]).then((function(e){x(Object(N.e)({data:e[0].data.success})),x(Object(Q.g)({data:e[1].data.success}))}))}),[x]);var M=function(){var e=Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h.applyPosition.every((function(e){return e.language_id&&e.rank_id&&e.rank_advanced_id}))){e.next=8;break}return z(!0),e.next=5,x(L(h));case 5:z(!1),e.next=9;break;case 8:Object(U.a)("Please select all field in apply position");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(A.jsx)(o.a,{children:Object(A.jsxs)(A.Fragment,{children:[D.map((function(e){var a=e.render;return Object(A.jsx)(s.a,{direction:R?"column":"row",spacing:2,sx:{paddingBottom:2},children:a.map((function(a){var i=a.key,c=a.label,o=a.type,s=a.required;return Object(A.jsx)(K,{touched:j[i],errors:n[i],label:c,type:o,values:h[i],name:i,handleBlur:r,handleChange:d,required:s,readOnly:t},"".concat(e.label,"-").concat(c))}))},e.label)})),!t&&Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(E,{legend:f.formatMessage({id:"apply-positions"}),children:Object(A.jsxs)(o.a,{children:[h.applyPosition.map((function(e,t){return Object(A.jsxs)(s.a,{direction:"row",alignItems:"center",spacing:2,sx:{padding:"1em 0"},children:[Object(A.jsxs)(s.a,{direction:R?"column":"row",spacing:2,sx:{flexGrow:1},children:[Object(A.jsxs)(w.a,{fullWidth:!0,error:Boolean(j.applyPosition&&n.applyPosition),children:[Object(A.jsx)(k.a,{options:T,onChange:function(e,n){p("applyPosition[".concat(t,"].language_id"),n&&n.id||"")},value:T.find((function(t){return t.id==e.language_id})),getOptionLabel:function(e){return e.name||""},renderInput:function(e){return Object(A.jsx)(q.a,Object(a.a)(Object(a.a)({},e),{},{variant:"standard",label:"Apply Position",placeholder:"Position"}))},sx:{flexGrow:1}}),j.applyPosition&&n.applyPosition&&Object(A.jsx)(P.a,{error:!0,id:"standard-weight-helper-text-last-name",children:n.applyPosition[t]&&n.applyPosition[t].language_id})]}),Object(A.jsxs)(w.a,{fullWidth:!0,error:Boolean(j.applyPosition&&n.applyPosition),children:[Object(A.jsx)(k.a,{options:B,onChange:function(e,n){p("applyPosition[".concat(t,"].rank_id"),n&&n.id||"")},value:B.find((function(t){return t.id==e.rank_id})),getOptionLabel:function(e){return e.name||""},renderInput:function(e){return Object(A.jsx)(q.a,Object(a.a)(Object(a.a)({},e),{},{variant:"standard",label:"Rank",placeholder:"Rank"}))},sx:{flexGrow:1}}),j.applyPosition&&n.applyPosition&&Object(A.jsx)(P.a,{error:!0,id:"standard-weight-helper-text-last-name",children:n.applyPosition[t]&&n.applyPosition[t].rank_id})]}),Object(A.jsxs)(w.a,{fullWidth:!0,error:Boolean(j.applyPosition&&n.applyPosition),children:[Object(A.jsx)(k.a,{options:B,onChange:function(e,n){p("applyPosition[".concat(t,"].rank_advanced_id"),n&&n.id||"")},value:B.find((function(t){return t.id==e.rank_advanced_id})),getOptionLabel:function(e){return e.name||""},renderInput:function(e){return Object(A.jsx)(q.a,Object(a.a)(Object(a.a)({},e),{},{variant:"standard",label:"Rank Advanced",placeholder:"Rank Advanced"}))},sx:{flexGrow:1}}),j.applyPosition&&n.applyPosition&&Object(A.jsx)(P.a,{error:!0,id:"standard-weight-helper-text-last-name",children:n.applyPosition[t]&&n.applyPosition[t].rank_advanced_id})]})]}),Object(A.jsx)(l.a,{variant:"outlined",color:"error",onClick:function(){p("applyPosition",h.applyPosition.filter((function(t){return t.language_id!==e.language_id})))},sx:{borderRadius:9999,width:"28px",height:"28px",padding:"3px",minWidth:"auto"},children:Object(A.jsx)(_.o,{})})]},Object(C.a)())})),Object(A.jsx)(s.a,{direction:"row",justifyContent:"center",alignItems:"center",spacing:2,children:Object(A.jsx)(l.a,{variant:"outlined",onClick:function(){p("applyPosition",h.applyPosition.concat({rank_advanced_id:"",language_id:"",rank_id:""}))},sx:{marginTop:2},children:"+ Add more position"})})]})}),Object(A.jsx)(o.a,{sx:{mt:2,width:{md:"fit-content",sm:"100%"}},children:Object(A.jsx)(I.a,{children:Object(A.jsx)(l.a,{disableElevation:!0,disabled:W,onClick:M,fullWidth:!0,size:"large",variant:"contained",color:"primary",sx:{marginTop:4},children:"Get Interview Question"})})})]})]})})},Y=n(301),Z=n(584),$=n(427),ee=n(592),te=Object(T.a)({itemHovered:{cursor:"pointer",border:"solid 1px #e0e0e0",borderColor:function(e){if(!e.interviewing)return"#e0e0e0";switch(e.status){case 0:return"rgb(255, 0, 0)";case 1:return"rgb(0, 255, 0)";default:return"#e0e0e0"}},transition:"0.3s","&:hover":{backgroundColor:"#c6f9ff"},"&:hover button":{transition:"0.7s",transform:"translate(-5px, 0)"}}}),ne=function(e){var t=e.value,n=e.interviewing,a=void 0!==n&&n,i=te({interviewing:a,status:t.status}),r=Object(F.d)();return Object(A.jsx)(Y.a,{className:i.itemHovered,variant:"outlined",sx:{padding:"1em"},children:Object(A.jsxs)(s.a,{direction:"row",alignItems:"center",spacing:2,children:[Object(A.jsx)(R.a,{variant:"body1",component:"span",sx:{flexGrow:1},children:t.question_content}),a&&Object(A.jsx)(s.a,{direction:"row",alignItems:"center",spacing:2,children:Object(A.jsx)(w.a,{children:Object(A.jsx)(Z.a,{"aria-labelledby":"demo-radio-buttons-group-label",value:"number"===typeof t.status?t.status+1:3,onChange:function(e){r(Object(H.f)({id:t.candidate_id||0,status:Number(e.target.value)-1}))},name:"radio-buttons-group",children:Object(A.jsxs)(s.a,{direction:"row",children:[Object(A.jsx)($.a,{value:3,control:Object(A.jsx)(ee.a,{}),label:"Skip",labelPlacement:"top"}),Object(A.jsx)($.a,{value:1,control:Object(A.jsx)(ee.a,{}),label:"Fail",labelPlacement:"top"}),Object(A.jsx)($.a,{value:2,control:Object(A.jsx)(ee.a,{}),label:"Pass",labelPlacement:"top"})]})})})})]})})},ae=p.a.memo(ne),ie=function(e){var t=e.questionStack,n=e.interviewing;e.onClickAddButton,e.onClickDeleteButton;return Object(A.jsxs)(o.a,{children:[Object(A.jsx)(s.a,{direction:"row",marginBottom:2,children:Object(A.jsx)(R.a,{variant:"h3",component:"h3",sx:{flexGrow:1},children:t.language})}),Object(A.jsx)(s.a,{direction:"column",spacing:2,children:Object.keys(t.questions).map((function(e){return t.questions[e].map((function(e){return Object(A.jsx)(ae,{value:e,interviewing:n},"".concat(t.language,"-").concat(e.id))}))}))})]})},re=p.a.memo(ie),ce=function(e){var t=e.questionList,n=e.interviewing,a=Object(u.useState)({rank_id:0,language_id:0}),i=Object(O.a)(a,2),r=i[0],c=(i[1],Object(F.d)());return Object(u.useEffect)((function(){var e,t;r.language_id&&r.rank_id&&(e=r.language_id,t=r.rank_id,c(W({language_id:e,rank_id:t})))}),[r]),Object(A.jsx)(A.Fragment,{children:Object(A.jsx)(s.a,{direction:"column",spacing:2,sx:{border:"solid 1px #e9e9e9",borderRadius:5,padding:2},children:t.map((function(e,t){return Object(A.jsx)(re,{questionStack:e,interviewing:n},e.language)}))})})},oe=n(46),se=n(72);t.default=function(){var e=Object(d.b)(),t=Object(F.e)((function(e){return e.applicant})),n=Object(j.f)().id,r=Object(b.a)(),p=Object(j.e)();return Object(u.useEffect)((function(){n?(e(z(n)),e(Object(oe.a)([""]))):(e(Object(H.c)()),e(Object(oe.a)(["applicant"])))}),[n,e]),Object(A.jsx)(o.a,{children:Object(A.jsx)(h.a,{enableReinitialize:!0,initialValues:t.applicantInfo,validationSchema:f.c().shape({name:f.e().required("First name is required"),age:f.b().required("Age is required"),email:f.e().email("Email is invalid").required("Email is required"),phone:f.e().required("Phone is required"),address:f.e().required("Address is required"),applyPosition:f.a().of(f.c().shape({language_id:f.e().required("Language is required"),rank_id:f.e().required("Rank is required"),rank_advanced_id:f.e().required("Rank advanced is required")}))}),onSubmit:function(){var e=Object(i.a)(c.a.mark((function e(t,i){var r,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=i.setSubmitting)(!0),!n){e.next=8;break}return o=Object(a.a)(Object(a.a)({},t),{},{status:1,candidateQuestions:t.questions}),e.next=6,Object(se.c)("".concat("https://api.bims.beetsoft.com.vn/api","/v1/client/candidates/").concat(n),o,"Success").then((function(){return p("/history")}));case 6:e.next=10;break;case 8:return e.next=10,Object(se.b)("".concat("https://api.bims.beetsoft.com.vn/api","/v1/client/candidates"),t,"Add applicant success").then((function(e){e&&e.success.id&&p("/applicant/".concat(e.success.id))}));case 10:return e.next=12,r(!1);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){return Object(A.jsxs)("form",{noValidate:!0,onSubmit:e.handleSubmit,children:[Object(A.jsx)(g.a,{title:r.formatMessage({id:"applicant-reference-form"}),children:Object(A.jsx)(X,Object(a.a)({interviewing:!!n},e))}),t.interviewQuestions.length>0&&Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(g.a,{title:r.formatMessage({id:"interview-questions"}),sx:{margin:"1em 0"},children:Object(A.jsx)(s.a,{direction:"column",spacing:2,children:Object(A.jsx)(ce,{questionList:t.interviewQuestions,interviewing:!!n})})}),Object(A.jsx)(g.a,{sx:{margin:"1em 0"},children:Object(A.jsx)(I.a,{children:Object(A.jsx)(l.a,{disableElevation:!0,disabled:e.isSubmitting,type:"submit",fullWidth:!0,size:"large",variant:"contained",color:"primary",children:n?"Send Interview Result":"Submit"})})})]})]})}})})}}}]);
//# sourceMappingURL=20.09a71966.chunk.js.map