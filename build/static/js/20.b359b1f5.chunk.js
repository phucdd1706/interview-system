(this["webpackJsonpinterview-manager-system"]=this["webpackJsonpinterview-manager-system"]||[]).push([[20],{314:function(e,t,n){"use strict";var a=n(14),i=n(0),r=n.n(i),c=n(333),s=n(288),o=n(1),d=r.a.forwardRef((function(e,t){var n,i,r,d,l=e.children,u=e.type,p=e.direction,b=e.offset,j=e.scale;switch(p){case"up":case"left":r=b,d=0;break;default:r=0,d=b}var h=Object(c.a)(r,d),f=Object(a.a)(h,2),O=f[0],m=f[1],g=Object(c.a)(r,d),v=Object(a.a)(g,2),x=v[0],y=v[1];switch(u){case"rotate":return Object(o.jsx)(s.a.div,{ref:t,animate:{rotate:360},transition:{repeat:1/0,repeatType:"loop",duration:2,repeatDelay:0},children:l});case"slide":return"up"===p||"down"===p?Object(o.jsx)(s.a.div,{ref:t,animate:{y:void 0!==x?x:""},onHoverEnd:function(){return y()},onHoverStart:function(){return y()},children:l}):Object(o.jsx)(s.a.div,{ref:t,animate:{x:void 0!==O?O:""},onHoverEnd:function(){return m()},onHoverStart:function(){return m()},children:l});default:return"number"===typeof j&&(j={hover:j,tap:j}),Object(o.jsx)(s.a.div,{ref:t,whileHover:{scale:null===(n=j)||void 0===n?void 0:n.hover},whileTap:{scale:null===(i=j)||void 0===i?void 0:i.tap},children:l})}}));d.defaultProps={type:"scale",offset:10,direction:"right",scale:{hover:1,tap:.9}},t.a=d},585:function(e,t,n){"use strict";n.r(t);var a=n(6),i=n(14),r=n(271),c=n(281),s=n(299),o=n(76),d=n(0),l=n.n(d),u=n(169),p=n(20),b=n(125),j=n(18),h=n(8),f=n.n(h),O=n(315),m=n(30),g=n(112),v=n.n(g),x=n(276),y=n(603),w=n(592),k=n(601),q=n(604),_=n(26),P=n(316),I=n(594),S=n(314),C=n(17),T=n(81),R=n(583),E=n(1),A=Object(R.a)({root:{position:"relative",width:"100%",margin:"2em 0",padding:"1em",border:"solid 1px",borderColor:"#bdbdbd",borderRadius:"4px"},legend:{zIndex:1,position:"absolute",width:"fit-content",height:"24px",background:"white",padding:"0.25em 0.5em",left:"10px",transform:"translate(0, -125%)"}}),B=function(e){var t=e.children,n=e.legend,a=A();return Object(E.jsxs)(r.a,{className:a.root,children:[n&&Object(E.jsx)(T.a,{variant:"h4",component:"h4",className:a.legend,children:n}),t]})},Q=n(9),F=n(128),N=n(131),W=n(22),H=n(23),G=n(135),L=Object(H.b)("applicantReferences/getQuestionsThunk",function(){var e=Object(j.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.b.getQuestionsThunk(t.language_id,t.rank_id);case 2:return n=e.sent,e.abrupt("return",n&&Object(Q.a)(Object(G.i)(n.success)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),z=Object(H.b)("applicant/getInterviewQuestionThunk",function(){var e=Object(j.a)(f.a.mark((function e(t,n){var a,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.b.getInterviewQuestionThunk({data:t.applyPosition});case 2:return a=e.sent,i=a.success.map((function(e){return Object.keys(e).map((function(t){return Object(W.a)(e[t])}))})).flat(2),e.abrupt("return",a&&Object(Q.a)(Object(G.g)({applicant:t,questions:i})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),D=Object(H.b)("applicant/getInterviewDataThunk",function(){var e=Object(j.a)(f.a.mark((function e(t){var n,i,r,c,s,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={name:"",age:"",email:"",phone:"",address:"",time:"",applyPosition:[],questions:[],status:1,note:""},e.next=3,G.b.getInterviewDataThunk(t);case 3:return i=e.sent,r=Object(a.a)({},i.success),c=r.candidate_question,s=c.map((function(e){return Object(a.a)(Object(a.a)({},e.question),{},{status:e.status,candidate_id:e.id})}))||[],Object.keys(n).forEach((function(e){r&&r[e]&&(n[e]=r[e])})),o=c.map((function(e){return{question_id:e.id,status:e.status}})),n.time=n.time.split(".")[0],e.abrupt("return",i&&Object(Q.a)(Object(G.h)({applicant:Object(a.a)({},n),interviewQuestions:s,questions:o})));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),M=[{label:"Information",render:[{key:"name",label:"Full Name",type:"text",required:!0},{key:"age",label:"Age",type:"number",required:!0},{key:"phone",label:"Phone Number",type:"tel",required:!0}]},{label:"Contact",render:[{key:"email",label:"Email",type:"email",required:!0}]},{label:"Address",render:[{key:"address",label:"Address",type:"text",required:!0}]},{label:"Interview Time",render:[{key:"time",label:"Interview Time",type:"datetime-local",required:!0}]},{label:"Note",render:[{key:"note",label:"Note",type:"text"}]}],V=n(595),J=n(602),K=function(e){var t=e.errors,n=e.handleBlur,a=e.handleChange,i=e.touched,r=e.values,c=e.label,s=e.required,o=e.type,d=e.name,l=e.readOnly;return Object(E.jsxs)(y.a,{fullWidth:!0,error:Boolean(i&&t&&!l),children:[Object(E.jsx)(V.a,{htmlFor:"outlined-adornment-".concat(c.split(" ").join("-")),required:s,children:c}),Object(E.jsx)(J.a,{id:"outlined-adornment-".concat(c.split(" ").join("-")),type:o,value:r,name:d,onBlur:n,onChange:a,label:c,inputProps:{},readOnly:l}),i&&t&&!l&&Object(E.jsx)(q.a,{error:!0,id:"standard-weight-helper-text-last-name",children:t})]})},U=l.a.memo(K),X=("".concat((new Date).toISOString().split("T")[0],"T09:00"),function(e){var t=e.interviewing,n=Object(u.a)(),i=Object(m.a)(),o=Object(Q.d)(),l=Object(x.a)(i.breakpoints.down("md")),p=Object(Q.e)((function(e){return e.language})).language,b=Object(Q.e)((function(e){return e.rank})).ranks,h=Object(Q.e)((function(e){return e.applicant})).applicantInfo;return d.useEffect((function(){v.a.all([C.a.get("/v1/languages/all"),C.a.get("/v1/ranks/all")]).then((function(e){o(Object(N.e)({data:e[0].data.success})),o(Object(F.g)({data:e[1].data.success}))}))}),[o]),Object(E.jsx)(r.a,{children:Object(E.jsx)(O.a,{enableReinitialize:!0,initialValues:h,validationSchema:P.c().shape({name:P.d().required("First name is required"),age:P.b().required("Age is required"),email:P.d().email("Email is invalid").required("Email is required"),phone:P.d().required("Phone is required"),address:P.d().required("Address is required"),applyPosition:P.a().of(P.c().shape({language_id:P.d().required("Language is required"),rank_id:P.d().required("Rank is required"),rank_advanced_id:P.d().required("Rank advanced is required")}))}),onSubmit:function(){var e=Object(j.a)(f.a.mark((function e(t,n){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=n.setSubmitting)(!0),e.next=4,o(z(t));case 4:a(!1);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var i=e.errors,o=e.handleBlur,d=e.handleChange,u=e.handleSubmit,j=e.setFieldValue,h=e.isSubmitting,f=e.touched,O=e.values;return Object(E.jsxs)("form",{noValidate:!0,onSubmit:u,children:[M.map((function(e){var n=e.render;return Object(E.jsx)(c.a,{direction:l?"column":"row",spacing:2,sx:{paddingBottom:2},children:n.map((function(n){var a=n.key,r=n.label,c=n.type,s=n.required;return Object(E.jsx)(U,{touched:f[a],errors:i[a],label:r,type:c,values:O[a],name:a,handleBlur:o,handleChange:d,required:s,readOnly:t},"".concat(e.label,"-").concat(r))}))},e.label)})),!t&&Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(B,{legend:n.formatMessage({id:"apply-positions"}),children:Object(E.jsxs)(r.a,{children:[O.applyPosition.map((function(e,t){return Object(E.jsxs)(c.a,{direction:"row",alignItems:"center",spacing:2,sx:{padding:"1em 0"},children:[Object(E.jsxs)(c.a,{direction:l?"column":"row",spacing:2,sx:{flexGrow:1},children:[Object(E.jsxs)(y.a,{fullWidth:!0,error:Boolean(f.applyPosition&&i.applyPosition),children:[Object(E.jsx)(w.a,{options:p,onChange:function(e,n){j("applyPosition[".concat(t,"].language_id"),n&&n.id||"")},value:p.find((function(t){return t.id==e.language_id})),getOptionLabel:function(e){return e.name||""},renderInput:function(e){return Object(E.jsx)(k.a,Object(a.a)(Object(a.a)({},e),{},{variant:"standard",label:"Apply Position",placeholder:"Position"}))},sx:{flexGrow:1}}),f.applyPosition&&i.applyPosition&&Object(E.jsx)(q.a,{error:!0,id:"standard-weight-helper-text-last-name",children:i.applyPosition[t]&&i.applyPosition[t].language_id})]}),Object(E.jsxs)(y.a,{fullWidth:!0,error:Boolean(f.applyPosition&&i.applyPosition),children:[Object(E.jsx)(w.a,{options:b,onChange:function(e,n){j("applyPosition[".concat(t,"].rank_id"),n&&n.id||"")},value:b.find((function(t){return t.id==e.rank_id})),getOptionLabel:function(e){return e.name||""},renderInput:function(e){return Object(E.jsx)(k.a,Object(a.a)(Object(a.a)({},e),{},{variant:"standard",label:"Rank",placeholder:"Rank"}))},sx:{flexGrow:1}}),f.applyPosition&&i.applyPosition&&Object(E.jsx)(q.a,{error:!0,id:"standard-weight-helper-text-last-name",children:i.applyPosition[t]&&i.applyPosition[t].rank_id})]}),Object(E.jsxs)(y.a,{fullWidth:!0,error:Boolean(f.applyPosition&&i.applyPosition),children:[Object(E.jsx)(w.a,{options:b,onChange:function(e,n){j("applyPosition[".concat(t,"].rank_advanced_id"),n&&n.id||"")},value:b.find((function(t){return t.id==e.rank_advanced_id})),getOptionLabel:function(e){return e.name||""},renderInput:function(e){return Object(E.jsx)(k.a,Object(a.a)(Object(a.a)({},e),{},{variant:"standard",label:"Rank Advanced",placeholder:"Rank Advanced"}))},sx:{flexGrow:1}}),f.applyPosition&&i.applyPosition&&Object(E.jsx)(q.a,{error:!0,id:"standard-weight-helper-text-last-name",children:i.applyPosition[t]&&i.applyPosition[t].rank_advanced_id})]})]}),Object(E.jsx)(s.a,{variant:"outlined",color:"error",onClick:function(){j("applyPosition",O.applyPosition.filter((function(t){return t.language_id!==e.language_id})))},sx:{borderRadius:9999,width:"28px",height:"28px",padding:"3px",minWidth:"auto"},children:Object(E.jsx)(_.o,{})})]},Object(I.a)())})),Object(E.jsx)(c.a,{direction:"row",justifyContent:"center",alignItems:"center",spacing:2,children:Object(E.jsx)(s.a,{variant:"outlined",onClick:function(){j("applyPosition",O.applyPosition.concat({rank_advanced_id:"",language_id:"",rank_id:""}))},sx:{marginTop:2},children:"+ Add more position"})})]})}),Object(E.jsx)(r.a,{sx:{mt:2,width:{md:"fit-content",sm:"100%"}},children:Object(E.jsx)(S.a,{children:Object(E.jsx)(s.a,{disableElevation:!0,disabled:h,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",sx:{marginTop:4},children:"Get Interview Question"})})})]})]})}})})}),Y=n(300),Z=n(591),$=n(606),ee=Object(R.a)({itemHovered:{cursor:"pointer",transition:"0.3s","&:hover":{backgroundColor:"#c6f9ff"},"&:hover button":{transition:"0.7s",transform:"translate(-5px, 0)"}}}),te=function(e){var t=e.value,n=e.interviewing,a=void 0!==n&&n,i=ee(),r=Object(Q.d)();return Object(E.jsx)(Y.a,{className:i.itemHovered,variant:"outlined",sx:{padding:"1em"},children:Object(E.jsxs)(c.a,{direction:"row",alignItems:"center",spacing:2,children:[Object(E.jsx)(T.a,{variant:"body1",component:"span",sx:{flexGrow:1},children:t.question_content}),a&&Object(E.jsx)(c.a,{direction:"row",alignItems:"center",spacing:2,children:Object(E.jsx)(y.a,{variant:"standard",sx:{m:1,minWidth:100,height:30},children:Object(E.jsxs)(Z.a,{labelId:"demo-simple-select-standard-label",id:"demo-simple-select-standard",label:"Evaluate",value:"number"===typeof t.status?t.status+1:3,onChange:function(e){r(Object(G.f)({id:t.candidate_id||0,status:Number(e.target.value)-1}))},children:[Object(E.jsx)($.a,{value:3,children:"Skip"}),Object(E.jsx)($.a,{value:1,children:"Fail"}),Object(E.jsx)($.a,{value:2,children:"Pass"})]})})})]})})},ne=l.a.memo(te),ae=function(e){var t=e.questionList,n=e.interviewing,a=Object(d.useState)({rank_id:0,language_id:0}),r=Object(i.a)(a,2),s=r[0],o=(r[1],Object(Q.d)());return Object(d.useEffect)((function(){var e,t;s.language_id&&s.rank_id&&(e=s.language_id,t=s.rank_id,o(L({language_id:e,rank_id:t})))}),[s]),Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(c.a,{direction:"column",spacing:2,sx:{border:"solid 1px #e9e9e9",borderRadius:5,padding:2},children:t.map((function(e,t){return Object(E.jsx)(ne,{value:e,interviewing:n},e.id)}))})})},ie=n(46),re=n(72);t.default=function(){var e=Object(o.b)(),t=Object(Q.e)((function(e){return e.applicant})),n=(Object(Q.e)((function(e){return e.history})).history,Object(p.f)().id),l=Object(u.a)(),j=Object(p.e)(),h=Object(d.useState)(!1),f=Object(i.a)(h,2),O=f[0],m=f[1];return Object(d.useEffect)((function(){e(n?D(n):Object(G.c)()),e(Object(ie.a)(["applicant"]))}),[n,e]),Object(E.jsxs)(r.a,{children:[Object(E.jsx)(b.a,{title:l.formatMessage({id:"applicant-reference-form"}),children:Object(E.jsx)(X,{interviewing:!!n})}),t.interviewQuestions.length>0&&Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(b.a,{title:l.formatMessage({id:"interview-questions"}),sx:{margin:"1em 0"},children:Object(E.jsx)(c.a,{direction:"column",spacing:2,children:Object(E.jsx)(ae,{questionList:t.interviewQuestions,interviewing:!!n})})}),Object(E.jsx)(b.a,{sx:{margin:"1em 0"},children:Object(E.jsx)(S.a,{children:Object(E.jsx)(s.a,{disableElevation:!0,disabled:O,onClick:function(){!function(e){var i=Object(a.a)({},t.applicantInfo),r=i.questions&&i.questions.map((function(e){return{question_id:e.question_id,status:e.status}}))||[];delete i.applyPosition,i.status=0,m(!0),e?(i.status=1,delete i.questions,Object(re.c)("".concat("https://api.bims.beetsoft.com.vn/api","/v1/client/candidates/").concat(n),Object(a.a)(Object(a.a)({},i),{},{candidateQuestions:r}),"Success")):(i.status=0,Object(re.b)("".concat("https://api.bims.beetsoft.com.vn/api","/v1/client/candidates"),i,"Add applicant success").then((function(e){e.success.id&&j("/applicant/".concat(e.success.id))}))),m(!1)}(!!n)},fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:n?"Send Interview Result":"Submit"})})})]})]})}}}]);
//# sourceMappingURL=20.b359b1f5.chunk.js.map