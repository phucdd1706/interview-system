(this["webpackJsonpinterview-manager-system"]=this["webpackJsonpinterview-manager-system"]||[]).push([[20],{315:function(e,t,n){"use strict";var a=n(14),i=n(0),r=n.n(i),c=n(334),o=n(289),s=n(1),l=r.a.forwardRef((function(e,t){var n,i,r,l,d=e.children,u=e.type,p=e.direction,b=e.offset,j=e.scale;switch(p){case"up":case"left":r=b,l=0;break;default:r=0,l=b}var h=Object(c.a)(r,l),O=Object(a.a)(h,2),f=O[0],m=O[1],g=Object(c.a)(r,l),x=Object(a.a)(g,2),v=x[0],y=x[1];switch(u){case"rotate":return Object(s.jsx)(o.a.div,{ref:t,animate:{rotate:360},transition:{repeat:1/0,repeatType:"loop",duration:2,repeatDelay:0},children:d});case"slide":return"up"===p||"down"===p?Object(s.jsx)(o.a.div,{ref:t,animate:{y:void 0!==v?v:""},onHoverEnd:function(){return y()},onHoverStart:function(){return y()},children:d}):Object(s.jsx)(o.a.div,{ref:t,animate:{x:void 0!==f?f:""},onHoverEnd:function(){return m()},onHoverStart:function(){return m()},children:d});default:return"number"===typeof j&&(j={hover:j,tap:j}),Object(s.jsx)(o.a.div,{ref:t,whileHover:{scale:null===(n=j)||void 0===n?void 0:n.hover},whileTap:{scale:null===(i=j)||void 0===i?void 0:i.tap},children:d})}}));l.defaultProps={type:"scale",offset:10,direction:"right",scale:{hover:1,tap:.9}},t.a=l},590:function(e,t,n){"use strict";n.r(t);var a=n(6),i=n(14),r=n(272),c=n(282),o=n(300),s=n(76),l=n(0),d=n.n(l),u=n(170),p=n(20),b=n(125),j=n(18),h=n(8),O=n.n(h),f=n(316),m=n(30),g=n(112),x=n.n(g),v=n(277),y=n(609),w=n(598),k=n(607),q=n(610),P=n(26),_=n(317),I=n(600),S=n(315),C=n(17),T=n(81),R=n(588),B=n(1),A=Object(R.a)({root:{position:"relative",width:"100%",margin:"2em 0",padding:"1em",border:"solid 1px",borderColor:"#bdbdbd",borderRadius:"4px"},legend:{zIndex:1,position:"absolute",width:"fit-content",height:"24px",background:"white",padding:"0.25em 0.5em",left:"10px",transform:"translate(0, -125%)"}}),E=function(e){var t=e.children,n=e.legend,a=A();return Object(B.jsxs)(r.a,{className:a.root,children:[n&&Object(B.jsx)(T.a,{variant:"h4",component:"h4",className:a.legend,children:n}),t]})},Q=n(9),F=n(128),N=n(131),G=n(23),H=n(135),W=Object(G.b)("applicantReferences/getQuestionsThunk",function(){var e=Object(j.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.b.getQuestionsThunk(t.language_id,t.rank_id);case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),L=Object(G.b)("applicant/getInterviewQuestionThunk",function(){var e=Object(j.a)(O.a.mark((function e(t,n){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.b.getInterviewQuestionThunk({data:t.applyPosition});case 2:return a=e.sent,console.log("data",a.success),e.abrupt("return",a&&Object(Q.a)(Object(H.g)({applicant:t,questions:a.success})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),D=Object(G.b)("applicant/getInterviewDataThunk",function(){var e=Object(j.a)(O.a.mark((function e(t){var n,i,r,c,o,s,l;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={name:"",age:"",email:"",phone:"",address:"",time:"",applyPosition:[],questions:[],status:1,note:""},e.next=3,H.b.getInterviewDataThunk(t);case 3:return i=e.sent,r=Object(a.a)({},i.success),c=r.candidate_question,o=c.map((function(e){return Object(a.a)(Object(a.a)({},e.question),{},{status:e.status,candidate_id:e.id})}))||[],console.log(c),s={language:"",questions:{base:o,focus:[],advanced:[]}},Object.keys(n).forEach((function(e){r&&r[e]&&(n[e]=r[e])})),l=c.map((function(e){return{question_id:e.id,status:e.status}})),n.time=n.time.split(".")[0],e.abrupt("return",i&&Object(Q.a)(Object(H.h)({applicant:Object(a.a)({},n),interviewQuestions:[Object(a.a)({},s)],questions:l})));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),z=[{label:"Information",render:[{key:"name",label:"Full Name",type:"text",required:!0},{key:"age",label:"Age",type:"number",required:!0},{key:"phone",label:"Phone Number",type:"tel",required:!0}]},{label:"Contact",render:[{key:"email",label:"Email",type:"email",required:!0}]},{label:"Address",render:[{key:"address",label:"Address",type:"text",required:!0}]},{label:"Interview Time",render:[{key:"time",label:"Interview Time",type:"datetime-local",required:!0}]},{label:"Note",render:[{key:"note",label:"Note",type:"text"}]}],M=n(601),V=n(608),J=function(e){var t=e.errors,n=e.handleBlur,a=e.handleChange,i=e.touched,r=e.values,c=e.label,o=e.required,s=e.type,l=e.name,d=e.readOnly;return Object(B.jsxs)(y.a,{fullWidth:!0,error:Boolean(i&&t&&!d),children:[Object(B.jsx)(M.a,{htmlFor:"outlined-adornment-".concat(c.split(" ").join("-")),required:o,children:c}),Object(B.jsx)(V.a,{id:"outlined-adornment-".concat(c.split(" ").join("-")),type:s,value:r,name:l,onBlur:n,onChange:a,label:c,inputProps:{},readOnly:d}),i&&t&&!d&&Object(B.jsx)(q.a,{error:!0,id:"standard-weight-helper-text-last-name",children:t})]})},K=d.a.memo(J),U=("".concat((new Date).toISOString().split("T")[0],"T09:00"),function(e){var t=e.interviewing,n=Object(u.a)(),i=Object(m.a)(),s=Object(Q.d)(),d=Object(v.a)(i.breakpoints.down("md")),p=Object(Q.e)((function(e){return e.language})).language,b=Object(Q.e)((function(e){return e.rank})).ranks,h=Object(Q.e)((function(e){return e.applicant})).applicantInfo;return l.useEffect((function(){x.a.all([C.a.get("/v1/languages/all"),C.a.get("/v1/ranks/all")]).then((function(e){s(Object(N.e)({data:e[0].data.success})),s(Object(F.g)({data:e[1].data.success}))}))}),[s]),Object(B.jsx)(r.a,{children:Object(B.jsx)(f.a,{enableReinitialize:!0,initialValues:h,validationSchema:_.c().shape({name:_.d().required("First name is required"),age:_.b().required("Age is required"),email:_.d().email("Email is invalid").required("Email is required"),phone:_.d().required("Phone is required"),address:_.d().required("Address is required"),applyPosition:_.a().of(_.c().shape({language_id:_.d().required("Language is required"),rank_id:_.d().required("Rank is required"),rank_advanced_id:_.d().required("Rank advanced is required")}))}),onSubmit:function(){var e=Object(j.a)(O.a.mark((function e(t,n){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=n.setSubmitting)(!0),e.next=4,s(L(t));case 4:a(!1);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var i=e.errors,s=e.handleBlur,l=e.handleChange,u=e.handleSubmit,j=e.setFieldValue,h=e.isSubmitting,O=e.touched,f=e.values;return Object(B.jsxs)("form",{noValidate:!0,onSubmit:u,children:[z.map((function(e){var n=e.render;return Object(B.jsx)(c.a,{direction:d?"column":"row",spacing:2,sx:{paddingBottom:2},children:n.map((function(n){var a=n.key,r=n.label,c=n.type,o=n.required;return Object(B.jsx)(K,{touched:O[a],errors:i[a],label:r,type:c,values:f[a],name:a,handleBlur:s,handleChange:l,required:o,readOnly:t},"".concat(e.label,"-").concat(r))}))},e.label)})),!t&&Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(E,{legend:n.formatMessage({id:"apply-positions"}),children:Object(B.jsxs)(r.a,{children:[f.applyPosition.map((function(e,t){return Object(B.jsxs)(c.a,{direction:"row",alignItems:"center",spacing:2,sx:{padding:"1em 0"},children:[Object(B.jsxs)(c.a,{direction:d?"column":"row",spacing:2,sx:{flexGrow:1},children:[Object(B.jsxs)(y.a,{fullWidth:!0,error:Boolean(O.applyPosition&&i.applyPosition),children:[Object(B.jsx)(w.a,{options:p,onChange:function(e,n){j("applyPosition[".concat(t,"].language_id"),n&&n.id||"")},value:p.find((function(t){return t.id==e.language_id})),getOptionLabel:function(e){return e.name||""},renderInput:function(e){return Object(B.jsx)(k.a,Object(a.a)(Object(a.a)({},e),{},{variant:"standard",label:"Apply Position",placeholder:"Position"}))},sx:{flexGrow:1}}),O.applyPosition&&i.applyPosition&&Object(B.jsx)(q.a,{error:!0,id:"standard-weight-helper-text-last-name",children:i.applyPosition[t]&&i.applyPosition[t].language_id})]}),Object(B.jsxs)(y.a,{fullWidth:!0,error:Boolean(O.applyPosition&&i.applyPosition),children:[Object(B.jsx)(w.a,{options:b,onChange:function(e,n){j("applyPosition[".concat(t,"].rank_id"),n&&n.id||"")},value:b.find((function(t){return t.id==e.rank_id})),getOptionLabel:function(e){return e.name||""},renderInput:function(e){return Object(B.jsx)(k.a,Object(a.a)(Object(a.a)({},e),{},{variant:"standard",label:"Rank",placeholder:"Rank"}))},sx:{flexGrow:1}}),O.applyPosition&&i.applyPosition&&Object(B.jsx)(q.a,{error:!0,id:"standard-weight-helper-text-last-name",children:i.applyPosition[t]&&i.applyPosition[t].rank_id})]}),Object(B.jsxs)(y.a,{fullWidth:!0,error:Boolean(O.applyPosition&&i.applyPosition),children:[Object(B.jsx)(w.a,{options:b,onChange:function(e,n){j("applyPosition[".concat(t,"].rank_advanced_id"),n&&n.id||"")},value:b.find((function(t){return t.id==e.rank_advanced_id})),getOptionLabel:function(e){return e.name||""},renderInput:function(e){return Object(B.jsx)(k.a,Object(a.a)(Object(a.a)({},e),{},{variant:"standard",label:"Rank Advanced",placeholder:"Rank Advanced"}))},sx:{flexGrow:1}}),O.applyPosition&&i.applyPosition&&Object(B.jsx)(q.a,{error:!0,id:"standard-weight-helper-text-last-name",children:i.applyPosition[t]&&i.applyPosition[t].rank_advanced_id})]})]}),Object(B.jsx)(o.a,{variant:"outlined",color:"error",onClick:function(){j("applyPosition",f.applyPosition.filter((function(t){return t.language_id!==e.language_id})))},sx:{borderRadius:9999,width:"28px",height:"28px",padding:"3px",minWidth:"auto"},children:Object(B.jsx)(P.o,{})})]},Object(I.a)())})),Object(B.jsx)(c.a,{direction:"row",justifyContent:"center",alignItems:"center",spacing:2,children:Object(B.jsx)(o.a,{variant:"outlined",onClick:function(){j("applyPosition",f.applyPosition.concat({rank_advanced_id:"",language_id:"",rank_id:""}))},sx:{marginTop:2},children:"+ Add more position"})})]})}),Object(B.jsx)(r.a,{sx:{mt:2,width:{md:"fit-content",sm:"100%"}},children:Object(B.jsx)(S.a,{children:Object(B.jsx)(o.a,{disableElevation:!0,disabled:h,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",sx:{marginTop:4},children:"Get Interview Question"})})})]})]})}})})}),X=n(301),Y=n(584),Z=n(427),$=n(592),ee=Object(R.a)({itemHovered:{cursor:"pointer",transition:"0.3s","&:hover":{backgroundColor:"#c6f9ff"},"&:hover button":{transition:"0.7s",transform:"translate(-5px, 0)"}}}),te=function(e){var t=e.value,n=e.interviewing,a=void 0!==n&&n,i=ee(),r=Object(Q.d)();return Object(B.jsx)(X.a,{className:i.itemHovered,variant:"outlined",sx:{padding:"1em"},children:Object(B.jsxs)(c.a,{direction:"row",alignItems:"center",spacing:2,children:[Object(B.jsx)(T.a,{variant:"body1",component:"span",sx:{flexGrow:1},children:t.question_content}),a&&Object(B.jsx)(c.a,{direction:"row",alignItems:"center",spacing:2,children:Object(B.jsx)(y.a,{children:Object(B.jsx)(Y.a,{"aria-labelledby":"demo-radio-buttons-group-label",value:"number"===typeof t.status?t.status+1:3,onChange:function(e){r(Object(H.f)({id:t.candidate_id||0,status:Number(e.target.value)-1}))},name:"radio-buttons-group",children:Object(B.jsxs)(c.a,{direction:"row",children:[Object(B.jsx)(Z.a,{value:3,control:Object(B.jsx)($.a,{}),label:"Skip",labelPlacement:"top"}),Object(B.jsx)(Z.a,{value:1,control:Object(B.jsx)($.a,{}),label:"Fail",labelPlacement:"top"}),Object(B.jsx)(Z.a,{value:2,control:Object(B.jsx)($.a,{}),label:"Pass",labelPlacement:"top"})]})})})})]})})},ne=d.a.memo(te),ae=function(e){var t=e.questionStack,n=e.interviewing;e.onClickAddButton,e.onClickDeleteButton,Object(Q.d)();return Object(B.jsxs)(r.a,{children:[Object(B.jsx)(c.a,{direction:"row",marginBottom:2,children:Object(B.jsx)(T.a,{variant:"h3",component:"h3",sx:{flexGrow:1},children:t.language})}),Object(B.jsx)(c.a,{direction:"column",spacing:2,children:Object.keys(t.questions).map((function(e){return t.questions[e].map((function(e){return Object(B.jsx)(ne,{value:e,interviewing:n},"".concat(t.language,"-").concat(e.id))}))}))})]})},ie=d.a.memo(ae),re=function(e){var t=e.questionList,n=e.interviewing,a=Object(l.useState)({rank_id:0,language_id:0}),r=Object(i.a)(a,2),o=r[0],s=(r[1],Object(Q.d)());return Object(l.useEffect)((function(){var e,t;o.language_id&&o.rank_id&&(e=o.language_id,t=o.rank_id,s(W({language_id:e,rank_id:t})))}),[o]),Object(B.jsx)(B.Fragment,{children:Object(B.jsx)(c.a,{direction:"column",spacing:2,sx:{border:"solid 1px #e9e9e9",borderRadius:5,padding:2},children:t.map((function(e,t){return Object(B.jsx)(ie,{questionStack:e,interviewing:n},e.language)}))})})},ce=n(46),oe=n(72);t.default=function(){var e=Object(s.b)(),t=Object(Q.e)((function(e){return e.applicant})),n=(Object(Q.e)((function(e){return e.history})).history,Object(p.f)().id),d=Object(u.a)(),j=Object(p.e)(),h=Object(l.useState)(!1),O=Object(i.a)(h,2),f=O[0],m=O[1];return Object(l.useEffect)((function(){e(n?D(n):Object(H.c)()),e(Object(ce.a)(["applicant"]))}),[n,e]),Object(B.jsxs)(r.a,{children:[Object(B.jsx)(b.a,{title:d.formatMessage({id:"applicant-reference-form"}),children:Object(B.jsx)(U,{interviewing:!!n})}),t.interviewQuestions.length>0&&Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(b.a,{title:d.formatMessage({id:"interview-questions"}),sx:{margin:"1em 0"},children:Object(B.jsx)(c.a,{direction:"column",spacing:2,children:Object(B.jsx)(re,{questionList:t.interviewQuestions,interviewing:!!n})})}),Object(B.jsx)(b.a,{sx:{margin:"1em 0"},children:Object(B.jsx)(S.a,{children:Object(B.jsx)(o.a,{disableElevation:!0,disabled:f,onClick:function(){!function(e){var i=Object(a.a)({},t.applicantInfo),r=i.questions&&i.questions.map((function(e){return{question_id:e.question_id,status:e.status}}))||[];delete i.applyPosition,i.status=0,m(!0),e?(i.status=1,delete i.questions,Object(oe.c)("".concat("https://api.bims.beetsoft.com.vn/api","/v1/client/candidates/").concat(n),Object(a.a)(Object(a.a)({},i),{},{candidateQuestions:r}),"Success")):(i.status=0,Object(oe.b)("".concat("https://api.bims.beetsoft.com.vn/api","/v1/client/candidates"),i,"Add applicant success").then((function(e){console.log(e),e&&e.success.id&&j("/applicant/".concat(e.success.id))}))),m(!1)}(!!n)},fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:n?"Send Interview Result":"Submit"})})})]})]})}}}]);
//# sourceMappingURL=20.47ec50e9.chunk.js.map