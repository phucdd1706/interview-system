(this["webpackJsonpinterview-manager-system"]=this["webpackJsonpinterview-manager-system"]||[]).push([[23],{393:function(e,n,t){"use strict";t.d(n,"b",(function(){return a})),t.d(n,"d",(function(){return i})),t.d(n,"c",(function(){return r})),t.d(n,"e",(function(){return c})),t.d(n,"a",(function(){return o})),t.d(n,"f",(function(){return s}));var a=/^[a-zA-Z0-9._%-]+@[a-zA-Z0-9.-]+.[a-zA-Z]{2,4}$/,i=/([+84][3|5|7|8|9]|84[3|5|7|8|9]|0[3|5|7|8|9])+([0-9]{8})+$/i,r=/^[a-zA-Z\xc0\xc1\xc2\xc3\xc8\xc9\xca\xcc\xcd\xd2\xd3\xd4\xd5\xd9\xda\u0102\u0110\u0128\u0168\u01a0\xe0\xe1\xe2\xe3\xe8\xe9\xea\xec\xed\xf2\xf3\xf4\xf5\xf9\xfa\u0103\u0111\u0129\u0169\u01a1\u01af\u0102\u1ea0\u1ea2\u1ea4\u1ea6\u1ea8\u1eaa\u1eac\u1eae\u1eb0\u1eb2\u1eb4\u1eb6\u1eb8\u1eba\u1ebc\u1ec0\u1ec0\u1ec2\u01b0\u0103\u1ea1\u1ea3\u1ea5\u1ea7\u1ea9\u1eab\u1ead\u1eaf\u1eb1\u1eb3\u1eb5\u1eb7\u1eb9\u1ebb\u1ebd\u1ec1\u1ec1\u1ec3\u1ec4\u1ec6\u1ec8\u1eca\u1ecc\u1ece\u1ed0\u1ed2\u1ed4\u1ed6\u1ed8\u1eda\u1edc\u1ede\u1ee0\u1ee2\u1ee4\u1ee6\u1ee8\u1eea\u1ec5\u1ebf\u1ec7\u1ec9\u1ecb\u1ecd\u1ecf\u1ed1\u1ed3\u1ed5\u1ed7\u1ed9\u1edb\u1edd\u1edf\u1ee1\u1ee3\u1ee5\u1ee7\u1ee9\u1eeb\u1eec\u1eee\u1ef0\u1ef2\u1ef4\xdd\u1ef6\u1ef8\u1eed\u1eef\u1ef1\u1ef3\u1ef5\u1ef7\u1ef9 ]*$/,c=/^[a-zA-Z0-9_-]+$/,o=/^[a-zA-Z0-9 @ .]+$/,s=/^.+$/},697:function(e,n,t){"use strict";t.r(n);var a=t(9),i=t(18),r=t(10),c=t.n(r),o=t(315),s=t(324),l=t(274),d=t(353),u=t(63),b=t(0),p=t.n(b),j=t(195),m=t(21),h=t(380),f=t(381),x=t(109),g=t(20),O=t(15),v=t(27),y=t(139),w=t.n(y),k=t(319),P=t(710),q=t(703),_=t(533),C=t(711),I=t(26),S=t(704),A=t(110),R=t(19),z=t(96),B=t(693),E=t(1),N=Object(B.a)({root:{position:"relative",width:"100%",margin:"2em 0",padding:"1em",border:"solid 1px",borderColor:"#bdbdbd",borderRadius:"4px"},legend:{zIndex:1,position:"absolute",width:"fit-content",height:"24px",background:"white",padding:"0.25em 0.5em",left:"10px",transform:"translate(0, -125%)"}}),F=function(e){var n=e.children,t=e.legend,a=N();return Object(E.jsxs)(o.a,{className:a.root,children:[t&&Object(E.jsx)(z.a,{variant:"h4",component:"h4",className:a.legend,children:t}),n]})},G=t(12),L=t(151),T=t(152),W=t(161),Z=[{label:"Information",render:[{key:"name",label:"Full Name",type:"text",required:!0},{key:"age",label:"Age",type:"number",required:!0},{key:"phone",label:"Phone Number",type:"tel",required:!0}]},{label:"Contact",render:[{key:"email",label:"Email",type:"email",required:!0}]},{label:"Address",render:[{key:"address",label:"Address",type:"text"}]},{label:"Interview Time",render:[{key:"time",label:"Interview Time",type:"datetime-local",required:!0}]}],$=function(e){var n=e.errors,t=(e.handleBlur,e.handleChange),i=e.touched,r=e.values,c=e.label,o=e.required,s=e.type,l=e.name,d=e.readOnly,u=e.InputProps;return Object(E.jsxs)(P.a,{fullWidth:!0,error:Boolean(i&&n&&!d),children:[Object(E.jsx)(_.a,{id:"outlined-adornment-".concat(c.split(" ").join("-")),type:s,required:o,InputProps:Object(a.a)(Object(a.a)({},u),{},{readOnly:d}),value:r,name:l,onChange:t,label:c,placeholder:c,InputLabelProps:"datetime-local"===s?{shrink:!0}:{}}),i&&n&&!d&&Object(E.jsx)(C.a,{error:!0,id:"standard-weight-helper-text-last-name",children:n})]})},M=p.a.memo($),Q=t(59),V=function(e){var n=e.interviewing,t=e.errors,r=e.handleBlur,l=e.handleChange,u=(e.handleSubmit,e.setFieldValue),p=e.touched,m=e.values,h=Object(j.a)(),f=Object(v.a)(),x=Object(G.d)(),y=Object(k.a)(f.breakpoints.down("md")),z=Object(G.e)((function(e){return e.language})).language,B=Object(G.e)((function(e){return e.rank})).ranks,N=b.useState(z),$=Object(O.a)(N,2),V=$[0],H=$[1],J=b.useState(!1),D=Object(O.a)(J,2),U=D[0],K=D[1];b.useEffect((function(){w.a.all([R.a.get("/v1/languages/all"),R.a.get("/v1/ranks/all")]).then((function(e){x(Object(T.e)({data:e[0].data.success})),x(Object(L.g)({data:e[1].data.success}))}))}),[x]);var X=function(){var e=Object(i.a)(c.a.mark((function e(){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=m.applyPosition.every((function(e){return e.language_id&&e.rank_id&&e.rank_advanced_id})),console.log(m.applyPosition),!n){e.next=9;break}return K(!0),e.next=6,x(Object(W.b)(m));case 6:K(!1),e.next=10;break;case 9:Object(Q.a)("Please select all field in apply position");case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return b.useEffect((function(){H(z)}),[z]),b.useEffect((function(){var e=m.applyPosition.map((function(e){return e.language_id}));if(e.length>0){var n=z.filter((function(n){return!e.includes(n.id)}));H(n)}}),[m,z]),Object(E.jsx)(o.a,{children:Object(E.jsxs)(E.Fragment,{children:[Z.map((function(e){var i=e.render;return Object(E.jsx)(s.a,{direction:y?"column":"row",spacing:2,sx:{paddingBottom:2},children:i.map((function(i){var c=i.key,o=i.label,s=i.type,d=i.required;return Object(E.jsx)(M,{InputProps:Object(a.a)({},i.inputProps),touched:p[c],errors:t[c],label:o,type:s,values:m[c],name:c,handleBlur:r,handleChange:l,required:d,readOnly:n},"".concat(e.label,"-").concat(o))}))},e.label)})),!n&&Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(F,{legend:h.formatMessage({id:"apply-positions"}),children:Object(E.jsxs)(o.a,{children:[m.applyPosition.map((function(e,n){return Object(E.jsxs)(s.a,{direction:"row",alignItems:"center",spacing:2,sx:{padding:"1em 0"},children:[Object(E.jsxs)(s.a,{direction:y?"column":"row",spacing:2,sx:{flexGrow:1},children:[Object(E.jsxs)(P.a,{fullWidth:!0,error:Boolean(p.applyPosition&&t.applyPosition),children:[Object(E.jsx)(q.a,{options:Object(g.a)(V).sort((function(e,n){return void 0!==e.name&&void 0!==n.name&&e.name>n.name?1:-1})),onChange:function(e,t){u("applyPosition[".concat(n,"].language_id"),t&&t.id||"")},value:z.find((function(n){return n.id===e.language_id})),getOptionLabel:function(e){return e.name||""},renderInput:function(e){return Object(E.jsx)(_.a,Object(a.a)(Object(a.a)({},e),{},{variant:"standard",label:"Apply Position",placeholder:"Position"}))},sx:{flexGrow:1}}),p.applyPosition&&t.applyPosition&&Object(E.jsx)(C.a,{error:!0,id:"standard-weight-helper-text-last-name",children:t.applyPosition[n]&&t.applyPosition[n].language_id})]}),Object(E.jsxs)(P.a,{fullWidth:!0,error:Boolean(p.applyPosition&&t.applyPosition),children:[Object(E.jsx)(q.a,{options:Object(g.a)(B).sort((function(e,n){return void 0!==e.name&&void 0!==n.name&&e.name>n.name?1:-1})),onChange:function(e,t){u("applyPosition[".concat(n,"].rank_id"),t&&t.id||"")},value:B.find((function(n){return n.id===e.rank_id})),getOptionLabel:function(e){return e.name||""},renderInput:function(e){return Object(E.jsx)(_.a,Object(a.a)(Object(a.a)({},e),{},{variant:"standard",label:"Rank",placeholder:"Rank"}))},sx:{flexGrow:1}}),p.applyPosition&&t.applyPosition&&Object(E.jsx)(C.a,{error:!0,id:"standard-weight-helper-text-last-name",children:t.applyPosition[n]&&t.applyPosition[n].rank_id})]}),Object(E.jsxs)(P.a,{fullWidth:!0,error:Boolean(p.applyPosition&&t.applyPosition),children:[Object(E.jsx)(q.a,{options:Object(g.a)(B).sort((function(e,n){return void 0!==e.name&&void 0!==n.name&&e.name>n.name?1:-1})),onChange:function(e,t){u("applyPosition[".concat(n,"].rank_advanced_id"),t&&t.id||"")},value:B.find((function(n){return n.id===e.rank_advanced_id})),getOptionLabel:function(e){return e.name||""},renderInput:function(e){return Object(E.jsx)(_.a,Object(a.a)(Object(a.a)({},e),{},{variant:"standard",label:"Rank Advanced",placeholder:"Rank Advanced"}))},sx:{flexGrow:1}}),p.applyPosition&&t.applyPosition&&Object(E.jsx)(C.a,{error:!0,id:"standard-weight-helper-text-last-name",children:t.applyPosition[n]&&t.applyPosition[n].rank_advanced_id})]})]}),Object(E.jsx)(d.a,{variant:"outlined",color:"error",onClick:function(){u("applyPosition",m.applyPosition.filter((function(e,t){return t!==n})))},sx:{borderRadius:9999,width:"28px",height:"28px",padding:"3px",minWidth:"auto"},children:Object(E.jsx)(I.o,{})})]},Object(S.a)())})),Object(E.jsx)(s.a,{direction:"row",justifyContent:"center",alignItems:"center",spacing:2,children:Object(E.jsx)(d.a,{variant:"outlined",onClick:function(){u("applyPosition",m.applyPosition.concat({rank_advanced_id:"",language_id:"",rank_id:""}))},sx:{marginTop:2},children:"+ Add more position"})})]})}),Object(E.jsx)(o.a,{sx:{mt:2,width:{md:"fit-content",sm:"100%"}},children:Object(E.jsx)(A.a,{children:Object(E.jsx)(d.a,{disableElevation:!0,disabled:U,onClick:X,fullWidth:!0,size:"large",variant:"contained",color:"primary",sx:{marginTop:4},children:"Get Interview Question"})})})]})]})})},H=t(661),J=t(210),D=t(690),U=t(663),K=t(701),X=Object(B.a)({itemHovered:{cursor:"pointer",border:"solid 1px #e0e0e0",borderColor:function(e){if(!e.interviewing)return"#e0e0e0";switch(e.status){case 0:return"rgb(255, 0, 0)";case 1:return"rgb(0, 255, 0)";default:return"#e0e0e0"}},transition:"0.3s","&:hover":{backgroundColor:"#c6f9ff"},"&:hover button":{transition:"0.7s",transform:"translate(-5px, 0)"}}}),Y=t(52),ee=function(e){var n=e.value,t=e.interviewing,a=void 0!==t&&t,i=(e.index,X({interviewing:a,status:n.status})),r=Object(G.d)();return Object(E.jsx)(J.a,{className:i.itemHovered,variant:"outlined",sx:{padding:"1em"},children:Object(E.jsxs)(s.a,{direction:"row",alignItems:"center",spacing:2,children:[Object(E.jsx)(z.a,{variant:"body1",component:"span",sx:{flexGrow:1,textOverflow:"ellipsis",overflow:"hidden"},children:n.question_content}),a&&Object(E.jsx)(s.a,{direction:"row",alignItems:"center",spacing:2,children:Object(E.jsx)(P.a,{children:Object(E.jsx)(D.a,{"aria-labelledby":"demo-radio-buttons-group-label",value:"number"===typeof n.status?n.status+1:3,onChange:function(e){r(Object(Y.d)({id:n.candidate_id||0,status:Number(e.target.value)-1}))},name:"radio-buttons-group",children:Object(E.jsxs)(s.a,{direction:"row",children:[Object(E.jsx)(U.a,{value:3,control:Object(E.jsx)(K.a,{}),label:"Skip",labelPlacement:"top"}),Object(E.jsx)(U.a,{value:1,control:Object(E.jsx)(K.a,{}),label:"Fail",labelPlacement:"top"}),Object(E.jsx)(U.a,{value:2,control:Object(E.jsx)(K.a,{}),label:"Pass",labelPlacement:"top"})]})})})})]})})},ne=p.a.memo(ee),te=function(e){var n=e.questionStack,t=e.interviewing;e.onClickAddButton,e.onClickDeleteButton;return Object(E.jsx)(o.a,{children:Object(E.jsx)(s.a,{direction:"column",spacing:2,children:Object.keys(n.questions).map((function(e){return Object(E.jsxs)(o.a,{children:[!t&&Object(E.jsx)(z.a,{variant:"h5",component:"h5",sx:{flexGrow:1,padding:"8px 0"},children:e.toUpperCase()}),Object(E.jsx)(s.a,{direction:"column",spacing:1,children:n.questions[e].map((function(a){return Object(E.jsx)(ne,{value:a,interviewing:t,index:0},"".concat(n.language,"-").concat(a.id,"-").concat(e))}))})]},"".concat(n.language,"-").concat(e))}))})})},ae=p.a.memo(te),ie=t(689),re=t(657),ce=t(713),oe=function(e){var n=e.questionList,t=e.interviewing,a=Object(b.useState)({rank_id:0,language_id:0}),i=Object(O.a)(a,1)[0],r=p.a.useRef(null),c=Object(G.d)(),l=Object(b.useState)("0"),d=Object(O.a)(l,2),u=d[0],j=d[1];return Object(b.useEffect)((function(){var e,n;i.language_id&&i.rank_id&&(e=i.language_id,n=i.rank_id,c(Object(W.c)({language_id:e,rank_id:n})))}),[i]),Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(s.a,{direction:"column",spacing:2,sx:{border:"solid 1px #e9e9e9",borderRadius:5,padding:2},children:Object(E.jsxs)(ie.a,{value:u,children:[Object(E.jsx)(o.a,{ref:r,sx:{borderBottom:1,borderColor:"divider",position:"relative"},children:Object(E.jsx)(re.a,{onChange:function(e,n){j(n)},"aria-label":"lab API tabs example",children:n.map((function(e,n){return Object(E.jsx)(H.a,{value:n.toString(),label:Object(E.jsx)(z.a,{variant:"h4",component:"h4",children:e.language})},n)}))})}),n.map((function(e,n){return Object(E.jsx)(ce.a,{value:n.toString(),children:Object(E.jsx)(ae,{questionStack:e,interviewing:t},e.language)},n)}))]})})})},se=t(42),le=t(73),de=t(393);n.default=function(){var e=Object(u.b)(),n=Object(G.e)((function(e){return e.applicant})),t=Object(m.f)().id,r=Object(j.a)(),p=Object(m.e)();return Object(b.useEffect)((function(){t?(e(Object(se.a)(["interview"])),e(Object(W.a)(t))):(e(Object(se.a)(["applicant"])),e(Object(Y.b)()))}),[t,e]),Object(E.jsx)(o.a,{children:Object(E.jsx)(h.a,{enableReinitialize:!0,initialValues:n.applicantInfo,validationSchema:f.d().shape({name:f.f().trim().min(2,"Name must have at least 2 characters").max(50,"Maximum characters allowed is 50").matches(de.c,"Sorry, only letters (a-z) are allowed").required("Name is required"),age:f.c().max(100,"Too old").min(0,"Too young").required("Age is required"),email:f.f().trim().email("Email is not valid").matches(de.a,"Email is not valid").max(50).required("Email is required"),phone:f.f().trim().max(12).matches(de.d,"Please enter the correct phone number format").required("Phone number is required"),address:f.f().trim().max(150),applyPosition:f.a().of(f.d().shape({language_id:f.f().required("Language is required"),rank_id:f.f().required("Rank is required"),rank_advanced_id:f.f().required("Rank advanced is required")})),time:f.f().required("Time is required"),note:f.f().trim().max(255)}),onSubmit:function(){var e=Object(i.a)(c.a.mark((function e(n,i){var r,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=i.setSubmitting)(!0),!t){e.next=8;break}return o=Object(a.a)(Object(a.a)({},n),{},{status:1,candidateQuestions:n.questions}),e.next=6,Object(le.c)("".concat("https://api.bims.beetsoft.com.vn/api","/v1/client/candidates/").concat(t),o,"Complete").then((function(){return p("/history")}));case 6:e.next=10;break;case 8:return e.next=10,Object(le.b)("".concat("https://api.bims.beetsoft.com.vn/api","/v1/client/candidates"),n,"Add applicant success").then((function(e){e&&e.success.id&&p("/interview/".concat(e.success.id))}));case 10:return e.next=12,r(!1);case 12:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),children:function(e){return Object(E.jsxs)("form",{noValidate:!0,onSubmit:e.handleSubmit,children:[Object(E.jsx)(x.a,{title:r.formatMessage({id:"applicant-reference-form"}),children:Object(E.jsx)(V,Object(a.a)({interviewing:!!t},e))}),n.interviewQuestions.length>0&&Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(x.a,{title:r.formatMessage({id:"interview-questions"}),sx:{margin:"1em 0"},children:Object(E.jsx)(s.a,{direction:"column",spacing:2,children:Object(E.jsx)(oe,{questionList:n.interviewQuestions,interviewing:!!t})})}),t&&Object(E.jsx)(x.a,{children:Object(E.jsx)(l.a,{name:"note",onChange:e.handleChange,"aria-label":"minimum height",minRows:3,placeholder:"Note",value:e.values.note,style:{width:"100%",padding:"8px"}})}),Object(E.jsx)(x.a,{sx:{margin:"1em 0"},children:Object(E.jsx)(A.a,{children:Object(E.jsx)(d.a,{disableElevation:!0,disabled:e.isSubmitting,type:"submit",fullWidth:!0,size:"large",variant:"contained",color:"primary",children:t?"Send Interview Result (".concat(n.applicantInfo.questions&&n.applicantInfo.questions.filter((function(e){return e.status&&2!==e.status})).length,"/").concat(n.applicantInfo.questions&&n.applicantInfo.questions.length," answered)"):"Submit"})})})]})]})}})})}}}]);
//# sourceMappingURL=23.ffcf68b1.chunk.js.map