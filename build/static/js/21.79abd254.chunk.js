(this["webpackJsonpinterview-manager-system"]=this["webpackJsonpinterview-manager-system"]||[]).push([[21],{314:function(e,t,n){"use strict";var a=n(14),i=n(0),r=n.n(i),c=n(398),o=n(289),s=n(1),l=r.a.forwardRef((function(e,t){var n,i,r,l,d=e.children,u=e.type,p=e.direction,b=e.offset,j=e.scale;switch(p){case"up":case"left":r=b,l=0;break;default:r=0,l=b}var h=Object(c.a)(r,l),f=Object(a.a)(h,2),m=f[0],O=f[1],g=Object(c.a)(r,l),x=Object(a.a)(g,2),v=x[0],y=x[1];switch(u){case"rotate":return Object(s.jsx)(o.a.div,{ref:t,animate:{rotate:360},transition:{repeat:1/0,repeatType:"loop",duration:2,repeatDelay:0},children:d});case"slide":return"up"===p||"down"===p?Object(s.jsx)(o.a.div,{ref:t,animate:{y:void 0!==v?v:""},onHoverEnd:function(){return y()},onHoverStart:function(){return y()},children:d}):Object(s.jsx)(o.a.div,{ref:t,animate:{x:void 0!==m?m:""},onHoverEnd:function(){return O()},onHoverStart:function(){return O()},children:d});default:return"number"===typeof j&&(j={hover:j,tap:j}),Object(s.jsx)(o.a.div,{ref:t,whileHover:{scale:null===(n=j)||void 0===n?void 0:n.hover},whileTap:{scale:null===(i=j)||void 0===i?void 0:i.tap},children:d})}}));l.defaultProps={type:"scale",offset:10,direction:"right",scale:{hover:1,tap:.9}},t.a=l},631:function(e,t,n){"use strict";n.r(t);var a=n(6),i=n(19),r=n(8),c=n.n(r),o=n(272),s=n(282),l=n(622),d=n(300),u=n(74),p=n(0),b=n.n(p),j=n(170),h=n(20),f=n(315),m=n(316),O=n(125),g=n(14),x=n(30),v=n(112),y=n.n(v),w=n(277),k=n(651),q=n(640),P=n(649),_=n(652),C=n(26),I=n(642),S=n(314),R=n(17),T=n(81),B=n(632),E=n(1),A=Object(B.a)({root:{position:"relative",width:"100%",margin:"2em 0",padding:"1em",border:"solid 1px",borderColor:"#bdbdbd",borderRadius:"4px"},legend:{zIndex:1,position:"absolute",width:"fit-content",height:"24px",background:"white",padding:"0.25em 0.5em",left:"10px",transform:"translate(0, -125%)"}}),F=function(e){var t=e.children,n=e.legend,a=A();return Object(E.jsxs)(o.a,{className:a.root,children:[n&&Object(E.jsx)(T.a,{variant:"h4",component:"h4",className:a.legend,children:n}),t]})},Q=n(9),N=n(128),G=n(129),H=n(23),W=n(139),L=n(61),z=Object(H.b)("applicantReferences/getQuestionsThunk",function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.a.getQuestionsThunk(t.language_id,t.rank_id);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),D=Object(H.b)("applicant/getInterviewQuestionThunk",function(){var e=Object(i.a)(c.a.mark((function e(t,n){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.a.getInterviewQuestionThunk({data:t.applyPosition});case 2:if(a=e.sent,!(a&&a.success.some((function(e){return e.questions.base.length>0||e.questions.focus.length>0||e.questions.advanced.length>0})))){e.next=6;break}return e.abrupt("return",a&&Object(Q.a)(Object(W.e)({applicant:t,questions:a.success})));case 6:return e.abrupt("return",Object(L.a)("No questions found"));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),M=Object(H.b)("applicant/getInterviewDataThunk",function(){var e=Object(i.a)(c.a.mark((function e(t){var n,i,r,o,s,l,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={name:"",age:"",email:"",phone:"",address:"",time:"",applyPosition:[],questions:[],status:1,note:""},e.next=3,W.a.getInterviewDataThunk(t);case 3:return i=e.sent,r=Object(a.a)({},i.success),o=r.candidate_question,s=o.map((function(e){return Object(a.a)(Object(a.a)({},e.question),{},{status:e.status,candidate_id:e.id})}))||[],console.log(o),l={language:"",questions:{base:s,focus:[],advanced:[]}},Object.keys(n).forEach((function(e){r&&r[e]&&(n[e]=r[e])})),d=o.map((function(e){return{question_id:e.id,status:e.status}})),n.time=n.time.split(".")[0],e.abrupt("return",i&&Object(Q.a)(Object(W.f)({applicant:Object(a.a)({},n),interviewQuestions:[Object(a.a)({},l)],questions:d})));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),V=[{label:"Information",render:[{key:"name",label:"Full Name",type:"text",required:!0},{key:"age",label:"Age",type:"number",required:!0},{key:"phone",label:"Phone Number",type:"tel",required:!0}]},{label:"Contact",render:[{key:"email",label:"Email",type:"email",required:!0}]},{label:"Address",render:[{key:"address",label:"Address",type:"text"}]},{label:"Interview Time",render:[{key:"time",label:"Interview Time",type:"datetime-local",required:!0}]}],J=n(643),K=n(650),U=function(e){var t=e.errors,n=(e.handleBlur,e.handleChange),a=e.touched,i=e.values,r=e.label,c=e.required,o=e.type,s=e.name,l=e.readOnly;return Object(E.jsxs)(k.a,{fullWidth:!0,error:Boolean(a&&t&&!l),children:[Object(E.jsx)(J.a,{htmlFor:"outlined-adornment-".concat(r.split(" ").join("-")),required:c,children:r}),Object(E.jsx)(K.a,{id:"outlined-adornment-".concat(r.split(" ").join("-")),type:o,value:i,name:s,onChange:n,label:r,readOnly:l,placeholder:r}),a&&t&&!l&&Object(E.jsx)(_.a,{error:!0,id:"standard-weight-helper-text-last-name",children:t})]})},X=b.a.memo(U),Y=function(e){var t=e.interviewing,n=e.errors,r=e.handleBlur,l=e.handleChange,u=(e.handleSubmit,e.setFieldValue),b=e.touched,h=e.values,f=Object(j.a)(),m=Object(x.a)(),O=Object(Q.d)(),v=Object(w.a)(m.breakpoints.down("md")),T=Object(Q.e)((function(e){return e.language})).language,B=Object(Q.e)((function(e){return e.rank})).ranks,A=p.useState(!1),H=Object(g.a)(A,2),W=H[0],z=H[1];p.useEffect((function(){y.a.all([R.a.get("/v1/languages/all"),R.a.get("/v1/ranks/all")]).then((function(e){O(Object(G.e)({data:e[0].data.success})),O(Object(N.g)({data:e[1].data.success}))}))}),[O]);var M=function(){var e=Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h.applyPosition.every((function(e){return e.language_id&&e.rank_id&&e.rank_advanced_id}))){e.next=8;break}return z(!0),e.next=5,O(D(h));case 5:z(!1),e.next=9;break;case 8:Object(L.a)("Please select all field in apply position");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(E.jsx)(o.a,{children:Object(E.jsxs)(E.Fragment,{children:[V.map((function(e){var a=e.render;return Object(E.jsx)(s.a,{direction:v?"column":"row",spacing:2,sx:{paddingBottom:2},children:a.map((function(a){var i=a.key,c=a.label,o=a.type,s=a.required;return Object(E.jsx)(X,{touched:b[i],errors:n[i],label:c,type:o,values:h[i],name:i,handleBlur:r,handleChange:l,required:s,readOnly:t},"".concat(e.label,"-").concat(c))}))},e.label)})),!t&&Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(F,{legend:f.formatMessage({id:"apply-positions"}),children:Object(E.jsxs)(o.a,{children:[h.applyPosition.map((function(e,t){return Object(E.jsxs)(s.a,{direction:"row",alignItems:"center",spacing:2,sx:{padding:"1em 0"},children:[Object(E.jsxs)(s.a,{direction:v?"column":"row",spacing:2,sx:{flexGrow:1},children:[Object(E.jsxs)(k.a,{fullWidth:!0,error:Boolean(b.applyPosition&&n.applyPosition),children:[Object(E.jsx)(q.a,{options:T,onChange:function(e,n){u("applyPosition[".concat(t,"].language_id"),n&&n.id||"")},value:T.find((function(t){return t.id===e.language_id})),getOptionLabel:function(e){return e.name||""},renderInput:function(e){return Object(E.jsx)(P.a,Object(a.a)(Object(a.a)({},e),{},{variant:"standard",label:"Apply Position",placeholder:"Position"}))},sx:{flexGrow:1}}),b.applyPosition&&n.applyPosition&&Object(E.jsx)(_.a,{error:!0,id:"standard-weight-helper-text-last-name",children:n.applyPosition[t]&&n.applyPosition[t].language_id})]}),Object(E.jsxs)(k.a,{fullWidth:!0,error:Boolean(b.applyPosition&&n.applyPosition),children:[Object(E.jsx)(q.a,{options:B,onChange:function(e,n){u("applyPosition[".concat(t,"].rank_id"),n&&n.id||"")},value:B.find((function(t){return t.id===e.rank_id})),getOptionLabel:function(e){return e.name||""},renderInput:function(e){return Object(E.jsx)(P.a,Object(a.a)(Object(a.a)({},e),{},{variant:"standard",label:"Rank",placeholder:"Rank"}))},sx:{flexGrow:1}}),b.applyPosition&&n.applyPosition&&Object(E.jsx)(_.a,{error:!0,id:"standard-weight-helper-text-last-name",children:n.applyPosition[t]&&n.applyPosition[t].rank_id})]}),Object(E.jsxs)(k.a,{fullWidth:!0,error:Boolean(b.applyPosition&&n.applyPosition),children:[Object(E.jsx)(q.a,{options:B,onChange:function(e,n){u("applyPosition[".concat(t,"].rank_advanced_id"),n&&n.id||"")},value:B.find((function(t){return t.id===e.rank_advanced_id})),getOptionLabel:function(e){return e.name||""},renderInput:function(e){return Object(E.jsx)(P.a,Object(a.a)(Object(a.a)({},e),{},{variant:"standard",label:"Rank Advanced",placeholder:"Rank Advanced"}))},sx:{flexGrow:1}}),b.applyPosition&&n.applyPosition&&Object(E.jsx)(_.a,{error:!0,id:"standard-weight-helper-text-last-name",children:n.applyPosition[t]&&n.applyPosition[t].rank_advanced_id})]})]}),Object(E.jsx)(d.a,{variant:"outlined",color:"error",onClick:function(){u("applyPosition",h.applyPosition.filter((function(e,n){return n!==t})))},sx:{borderRadius:9999,width:"28px",height:"28px",padding:"3px",minWidth:"auto"},children:Object(E.jsx)(C.o,{})})]},Object(I.a)())})),Object(E.jsx)(s.a,{direction:"row",justifyContent:"center",alignItems:"center",spacing:2,children:Object(E.jsx)(d.a,{variant:"outlined",onClick:function(){u("applyPosition",h.applyPosition.concat({rank_advanced_id:"",language_id:"",rank_id:""}))},sx:{marginTop:2},children:"+ Add more position"})})]})}),Object(E.jsx)(o.a,{sx:{mt:2,width:{md:"fit-content",sm:"100%"}},children:Object(E.jsx)(S.a,{children:Object(E.jsx)(d.a,{disableElevation:!0,disabled:W,onClick:M,fullWidth:!0,size:"large",variant:"contained",color:"primary",sx:{marginTop:4},children:"Get Interview Question"})})})]})]})})},Z=n(301),$=n(626),ee=n(443),te=n(636),ne=Object(B.a)({itemHovered:{cursor:"pointer",border:"solid 1px #e0e0e0",borderColor:function(e){if(!e.interviewing)return"#e0e0e0";switch(e.status){case 0:return"rgb(255, 0, 0)";case 1:return"rgb(0, 255, 0)";default:return"#e0e0e0"}},transition:"0.3s","&:hover":{backgroundColor:"#c6f9ff"},"&:hover button":{transition:"0.7s",transform:"translate(-5px, 0)"}}}),ae=function(e){var t=e.value,n=e.interviewing,a=void 0!==n&&n,i=(e.index,ne({interviewing:a,status:t.status})),r=Object(Q.d)();return Object(E.jsx)(Z.a,{className:i.itemHovered,variant:"outlined",sx:{padding:"1em"},children:Object(E.jsxs)(s.a,{direction:"row",alignItems:"center",spacing:2,children:[Object(E.jsxs)(T.a,{variant:"body1",component:"span",sx:{flexGrow:1},children:["C\xe2u h\u1ecfi : ",t.question_content,"?"]}),a&&Object(E.jsx)(s.a,{direction:"row",alignItems:"center",spacing:2,children:Object(E.jsx)(k.a,{children:Object(E.jsx)($.a,{"aria-labelledby":"demo-radio-buttons-group-label",value:"number"===typeof t.status?t.status+1:3,onChange:function(e){r(Object(W.d)({id:t.candidate_id||0,status:Number(e.target.value)-1}))},name:"radio-buttons-group",children:Object(E.jsxs)(s.a,{direction:"row",children:[Object(E.jsx)(ee.a,{value:3,control:Object(E.jsx)(te.a,{}),label:"Skip",labelPlacement:"top"}),Object(E.jsx)(ee.a,{value:1,control:Object(E.jsx)(te.a,{}),label:"Fail",labelPlacement:"top"}),Object(E.jsx)(ee.a,{value:2,control:Object(E.jsx)(te.a,{}),label:"Pass",labelPlacement:"top"})]})})})})]})})},ie=b.a.memo(ae),re=function(e){var t=e.questionStack,n=e.interviewing;e.onClickAddButton,e.onClickDeleteButton;return Object(E.jsxs)(o.a,{children:[Object(E.jsx)(s.a,{direction:"row",marginBottom:2,children:Object(E.jsx)(T.a,{variant:"h3",component:"h3",sx:{flexGrow:1},children:t.language})}),Object(E.jsx)(s.a,{direction:"column",spacing:2,children:Object.keys(t.questions).map((function(e){return t.questions[e].map((function(e){return Object(E.jsx)(ie,{value:e,interviewing:n,index:0},"".concat(t.language,"-").concat(e.id))}))}))})]})},ce=b.a.memo(re),oe=function(e){var t=e.questionList,n=e.interviewing,a=Object(p.useState)({rank_id:0,language_id:0}),i=Object(g.a)(a,1)[0],r=Object(Q.d)();return Object(p.useEffect)((function(){var e,t;i.language_id&&i.rank_id&&(e=i.language_id,t=i.rank_id,r(z({language_id:e,rank_id:t})))}),[i]),Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(s.a,{direction:"column",spacing:2,sx:{border:"solid 1px #e9e9e9",borderRadius:5,padding:2},children:t.map((function(e,t){return Object(E.jsx)(ce,{questionStack:e,interviewing:n},e.language)}))})})},se=n(46),le=n(72);t.default=function(){var e=Object(u.b)(),t=Object(Q.e)((function(e){return e.applicant})),n=Object(h.f)().id,r=Object(j.a)(),b=Object(h.e)();return Object(p.useEffect)((function(){n?(e(M(n)),e(Object(se.a)([""]))):(e(Object(W.b)()),e(Object(se.a)(["applicant"])))}),[n,e]),Object(E.jsx)(o.a,{children:Object(E.jsx)(f.a,{enableReinitialize:!0,initialValues:t.applicantInfo,validationSchema:m.c().shape({name:m.e().required("First name is required"),age:m.b().required("Age is required"),email:m.e().email("Email is invalid").required("Email is required"),phone:m.e().required("Phone is required"),applyPosition:m.a().of(m.c().shape({language_id:m.e().required("Language is required"),rank_id:m.e().required("Rank is required"),rank_advanced_id:m.e().required("Rank advanced is required")})),time:m.e().required("Time is required")}),onSubmit:function(){var e=Object(i.a)(c.a.mark((function e(t,i){var r,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=i.setSubmitting)(!0),!n){e.next=8;break}return o=Object(a.a)(Object(a.a)({},t),{},{status:1,candidateQuestions:t.questions}),e.next=6,Object(le.c)("".concat("https://api.bims.beetsoft.com.vn/api","/v1/client/candidates/").concat(n),o,"Complete").then((function(){return b("/history")}));case 6:e.next=10;break;case 8:return e.next=10,Object(le.b)("".concat("https://api.bims.beetsoft.com.vn/api","/v1/client/candidates"),t,"Add applicant success").then((function(e){e&&e.success.id&&b("/applicant/".concat(e.success.id))}));case 10:return e.next=12,r(!1);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){return Object(E.jsxs)("form",{noValidate:!0,onSubmit:e.handleSubmit,children:[console.log(e.values),Object(E.jsx)(O.a,{title:r.formatMessage({id:"applicant-reference-form"}),children:Object(E.jsx)(Y,Object(a.a)({interviewing:!!n},e))}),t.interviewQuestions.length>0&&Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(O.a,{title:r.formatMessage({id:"interview-questions"}),sx:{margin:"1em 0"},children:Object(E.jsx)(s.a,{direction:"column",spacing:2,children:Object(E.jsx)(oe,{questionList:t.interviewQuestions,interviewing:!!n})})}),n&&Object(E.jsx)(O.a,{children:Object(E.jsx)(l.a,{name:"note",onChange:e.handleChange,"aria-label":"minimum height",minRows:3,placeholder:"Note",value:e.values.note,style:{width:"100%",padding:"8px"}})}),Object(E.jsx)(O.a,{sx:{margin:"1em 0"},children:Object(E.jsx)(S.a,{children:Object(E.jsx)(d.a,{disableElevation:!0,disabled:e.isSubmitting,type:"submit",fullWidth:!0,size:"large",variant:"contained",color:"primary",children:n?"Send Interview Result":"Submit"})})})]})]})}})})}}}]);
//# sourceMappingURL=21.79abd254.chunk.js.map